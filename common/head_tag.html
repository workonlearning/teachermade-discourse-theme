<script type="text/discourse-plugin" version="0.8">
  let loadScript = require('discourse/lib/load-script').default;
  api.onPageChange((url, title) => {
    window.searchForum = () => {
      const query = document.getElementById('searchField').value;
      if (query) {
        window.location.assign(`/search?q=${encodeURI(query)}`)
      }
    }
    document.getElementById('searchButton').addEventListener('click', window.searchForum)
    document.getElementById('searchField').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        window.searchForum();
      }
    });
  });
</script>

<!-- Use reopenWidget to override the home-logo widget and send a user to the TeacherMade site when the logo is clicked. -->
<script type="text/discourse-plugin" version="0.8.13">
api.reopenWidget("home-logo", {
  href() {
    return 'https://app.teachermade.com/app/';
  },
});
</script>

<!-- Add a home page icon/link to the header -->
<script type="text/discourse-plugin" version="0.8">
  const { iconNode } = require("discourse-common/lib/icon-library");
  api.decorateWidget('header-icons:before', helper => {
      return helper.h('li', [
          helper.h('a.icon', {
              href:'/',
              title: 'Home'
          }, iconNode('home')),
      ]);
  });
</script>